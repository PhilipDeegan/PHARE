property:
  cxx_flags: --std=c++20 -fsized-deallocation -DPHARE_HAVE_MKN_GPU -fPIC -fsanitize=address -fno-omit-frame-pointer
local:
  repo: /mkn/r
  mod-repo: /mkn/m
remote:
  repo: git@github.com:mkn/
  mod-repo: git@github.com:mkn-mod/
env: |
  PATH=/opt/mpi/rocm/bin:/opt/rocm/bin:${PATH}
  OMPI_CXX=hipcc
  LD_PRELOAD=/opt/rocm-6.1.0/lib/llvm/lib/clang/17/lib/linux/libclang_rt.asan-x86_64.so
  ASAN_OPTIONS=detect_leaks=0
path: |
  /opt/rocm/lib/llvm/lib/clang/17/lib/linux
compiler:
  mask:
    g++:
      mpicxx
file:
  - type: cpp:cxx:cc:c:S
    archiver: ar -cr
    compiler:  mpicxx ${cxx_flags}
    linker:  mpicxx  --std=c++20 -lclang_rt.asan-x86_64
